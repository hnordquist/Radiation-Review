# Microsoft make rules



# Tools -- must have path to these in your PATH
CC           = cl
LINK         = link
IMPLIB       = implib
LIBEXE       = lib
RC           = rc

!IFDEF QUICKWINAPP
WINAPPOPT  = -Mq
WINAPPLIB  = llibcewq
!ELSE
WINAPPOPT  = -GA
WINAPPLIB  = llibcew
!ENDIF

# Compile Options
# Build Large Model DLL
!IF "$(TARGET_TYPE)" == "WINDLL"
CCFLAGS      = -c -Zp1 -GD2 -ALw -W3 -YX"vpp.hpp" -Fp"$(OBJDIR)\$(LIBNAME).PCH" -Fd"$(LIBDIR)\$(LIBNAME).PDB" $(RDXOPTS)
CCFLAGS_OPT  = -DNDEBUG -Gs
CCFLAGS_DBG  = -Zi -Od -D_DEBUG
LNKFLAGS     = /NOD /NOE /PACKC:61440 /ALIGN:16 /ONERROR:NOEXE
LNKFLAGS_DBG = /CO
RCFLAGS      = /30 /k
CC_LIBS      = oldnames libw ldllcew
LIBEND       = ;
LINKEND      = $(LIBNAME).dll,,$(RDXLIB) $(CC_LIBS) $(DEFFILE) $(LIBEND)
!ENDIF

# Build Large Model Windows Application
!IF "$(TARGET_TYPE)" == "WINAPP"
CCFLAGS      = -c -Zp1 -G2 -ALw -W3 -YX"vpp.hpp" $(RDXOPTS) $(WINAPPOPT)
CCFLAGS_OPT  = -DNDEBUG -Gs
CCFLAGS_DBG  = -Zi -Od -D_DEBUG
LNKFLAGS     = /NOD/NOE
LNKFLAGS_DBG = /CO
RCFLAGS      = /t/30
CC_LIBS      = oldnames libw $(WINAPPLIB)
LIBEND       = ;
LINKEND      = $(ROMLIB) $(RDXLIB) $(CC_LIBS) $(DEFFILE) $(LIBEND)
!ENDIF

# Build Large Model Dos Library
!IF "$(TARGET_TYPE)" == "DOSLIB"
CCFLAGS      = -c -Zp1 -G2 -AL -W3 $(RDXOPTS)
CCFLAGS_OPT  = -Ot -DNDEBUG -Gs 
CCFLAGS_DBG  = -Zi -Od -D_DEBUG
LNKFLAGS     = /NOD/NOI/NOE
LNKFLAGS_DBG = /CO
RCFLAGS      =
CC_LIBS      = llibce oldnames
LIBEND       = ;
LINKEND      = $(LIBEND)
!ENDIF

# Build Large Model Dos Application
!IF "$(TARGET_TYPE)" == "DOSAPP"
CCFLAGS      = -c -Zp -G2 -AL -W3 -YX"vpp.hpp" -Fp"$(OBJDIR)\$(LIBNAME).PCH" $(RDXOPTS)
CCFLAGS_OPT  = -Ot -DNDEBUG
CCFLAGS_DBG  = -Zi -Od -D_DEBUG
LNKFLAGS     = /NOD/NOI/NOE/STACK:10000/SE:300
LNKFLAGS_DBG = /CO
RCFLAGS      =
CC_LIBS      = llibce oldnames
LIBEND       = ;
LINKEND      = $(ROMLIB) $(RDXLIB) $(QUERYLIB) $(CC_LIBS) 
LINK2        = $(LMLIB) $(LIBEND)
!ENDIF


MKCMD        = $(CC) @mkopts.fil $(INCPATHS) -Fo$*.obj
RCOPTS       = $(RCFLAGS)

# Debug options
!IFDEF DEBUG
CCOPTS       = $(CCFLAGS)  $(CCFLAGS_DBG)
LNKOPTS      = $(LNKFLAGS) $(LNKFLAGS_DBG)
!ELSE
CCOPTS       = $(CCFLAGS)  $(CCFLAGS_OPT)
LNKOPTS      = $(LNKFLAGS) 
!ENDIF

