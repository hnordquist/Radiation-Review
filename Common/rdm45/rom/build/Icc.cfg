# IBM VisualAge C++  make rules


# Tools -- must have path to these in your PATH
CC           = icc
LINK         = ilink
IMPLIB       = implib
LIBEXE       = lib
RC           = rc

# Compile Options
# Build DLL
!IF "$(TARGET_TYPE)" == "OS2DLL"
CCFLAGS      = /Fd- /Ms /C /J- /Q /Gm /Gd /Ge- /Sp1 /Fi /Gx /Sce /Ss $(RDXOPTS)
CCFLAGS_OPT  = /Gs /O
CCFLAGS_DBG  = /W3
CCFLAGS_DBG  = /Ti /Tm 
LNKFLAGS     = /NOI /NOE /NOLOGO /OUT:$(LIBNAME).dll /ST:10000
LNKFLAGS_DBG = /DEBUG
RCFLAGS      = /30
CC_LIBS      = 
LIBEND       = 
LINKEND      = $(RDXLIB).lib $(CC_LIBS) $(DEFFILE)
!ENDIF

# Build Large Model Application
!IF "$(TARGET_TYPE)" == "OS2APP"
CCFLAGS      = /Fd- /Ms /J- /C /Q /Gm /Gd /Sp1 /Fi /Sc /Ss $(RDXOPTS)
CCFLAGS_OPT  = /Gs /O
CCFLAGS_DBG  = /Ti /Tm
LNKFLAGS     = /NOI /NOE /NOLOGO /SEG:256 /ST:10000 /PM:VIO
LNKFLAGS_DBG = /DEBUG
RCFLAGS      = /30
CC_LIBS      = CPPOM30I.lib os2386.lib 
LIBEND       = ;
LINKEND      = $(ROMLIB).lib $(CC_LIBS) $(DEFFILE)
!ENDIF

# Debug options
!IFDEF DEBUG
CCOPTS       = $(CCFLAGS)  $(CCFLAGS_DBG)
LNKOPTS      = $(LNKFLAGS) $(LNKFLAGS_DBG)
!ELSE
CCOPTS       = $(CCFLAGS)  $(CCFLAGS_OPT)
LNKOPTS      = $(LNKFLAGS) 
!ENDIF

MKCMD        = $(CC) $(CCOPTS) $(INCPATHS) -Fo$*.obj
RCOPTS       = $(RCFLAGS)

OBJDIR = $(ROMSRC)\$(COMPILER)\$(RDX)


